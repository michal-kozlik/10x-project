---
import AuthLayout from "@/layouts/AuthLayout.astro";
import RequestResetForm from "@/components/auth/RequestResetForm";
import SetNewPasswordForm from "@/components/auth/SetNewPasswordForm";

// Sprawdzanie tokenu od Supabase w URLu - jeśli jest, to zmiana hasła, jeśli nie to żądanie resetu
const hasAccessToken = Astro.url.hash.includes("access_token=");
---

<AuthLayout 
  title={hasAccessToken ? "Ustaw nowe hasło" : "Resetowanie hasła"} 
  subtitle={hasAccessToken ? undefined : "Wyślemy Ci link do zmiany hasła."}
>
  {
    hasAccessToken ? (
      <SetNewPasswordForm client:load />
    ) : (
      <RequestResetForm client:load />
    )
  }
</AuthLayout>